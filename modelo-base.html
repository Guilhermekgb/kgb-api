<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Página Modelo Base</title>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Estilos (ordem IMPORTA: global antes, menu depois) -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="menu-lateral.css?v=espresso12">

  <style>
    :root{ --sidebar-w:260px; }

    html, body{
      margin:0; padding:0; background:#f8f1e8; height:100%;
    }

    /* Padrão de fontes */
    main.conteudo-principal,
    input, select, textarea, button{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    }
    h1, h2, h3{
      font-family:"Playfair Display", ui-serif, Georgia, "Times New Roman", serif;
    }

    /* Layout base */
    .wrapper{
      display:flex;
      min-height:100vh;
      overflow:hidden;
    }

    /* Menu lateral (desktop reserva espaço; mobile vira off-canvas) */
    #menuLateral{
      flex-shrink:0;
      height:100vh;
      overflow-y:auto;
    }

    /* Faixa principal ocupa 100% da área útil à direita do menu */
    main.conteudo-principal{
      flex:1;
      min-height:100vh;
      height:auto;
      overflow-y:auto;
      width:100% !important;
      max-width:none !important;
      margin:0 !important;
      padding:24px clamp(16px, 3vw, 32px) 40px;
    }

    /* Achata o wrapper para os filhos usarem toda a largura do main */
    .conteudo-central{ display:contents !important; }

    h1{
      font-size:28px;
      color:#5a3e2b;
      display:flex; align-items:center; gap:10px;
    }

    #hamburguer{
      position:fixed; top:12px; left:12px;
      background:#c29a5d; border:none; color:#fff;
      font-size:24px; padding:6px 12px; border-radius:8px;
      z-index:1001; display:none;
    }

    /* ===== Desktop: menu fixo + reserva única ===== */
    @media (min-width:769px){
      #menuLateral{
        position:fixed; inset:0 auto 0 0;
        width:var(--sidebar-w); height:100vh; z-index:999;
      }
      .wrapper{ padding-left:var(--sidebar-w); }
      main.conteudo-principal{ margin-left:0 !important; }
    }

    /* ===== Mobile: off-canvas ===== */
    @media (max-width:768px){
      #hamburguer{ display:block; }

      #menuLateral{
        position:fixed;
        transform:translateX(-100%);
        transition:transform .3s ease;
        z-index:999; width:var(--sidebar-w);
      }
      #menuLateral.aberto{ transform:translateX(0); }

      .wrapper{ padding-left:0; }
      main.conteudo-principal{ padding:20px; }
    }

    /* Ativo no menu */
    .menu-lateral a.ativo,
    .menu-lateral .submenu a.ativo{
      background:#f3e8da;
      border-radius:6px;
      font-weight:bold;
    }

    /* === FORÇA LOCAL: espresso sólido #532b03 no modelo-base === */
    html body aside#menuLateral{
      background-color:#532b03 !important;   /* cor lisa desejada */
      background-image:none !important;       /* evita degradês antigos */
      box-shadow:2px 0 14px rgba(0,0,0,.18);
    }
    /* nada pode “tampar” o fundo do aside */
    aside#menuLateral .menu-lateral,
    aside#menuLateral .submenu{
      background:transparent !important;
      background-color:transparent !important;
    }
  </style>
</head>
<body>

  <!-- Botão Mobile -->
  <button id="hamburguer" aria-label="Abrir menu"><i data-lucide="menu"></i></button>

  <!-- Wrapper geral -->
  <div class="wrapper">
    <!-- Menu lateral (conteúdo é injetado via JS) -->
    <aside id="menuLateral"></aside>
    <div id="menuBackdrop" hidden></div>

    <!-- Conteúdo principal -->
    <main class="conteudo-principal">
      <div class="conteudo-central">
        <h1><i data-lucide="code"></i> PÁGINA MODELO BASE</h1>
        <p>Este é um modelo de página padrão com menu lateral, botão hamburguer e responsividade.</p>
      </div>
    </main>
  </div>
 <script>
    window.firebaseSync = window.firebaseSync || {};
    window.firebaseSync.enabled = true;
  </script>
  <!-- Scripts -->
  <script type="module" src="menu-lateral.js"></script>
  <script type="module">
    import guard, { aplicarPermissoesNaTela } from './api/proteger-pagina.js';

    const meta = document.querySelector('meta[name="page-permission"]');
    const permissao = meta?.content?.trim();
    if (permissao) guard({ permissao });

    aplicarPermissoesNaTela();

    // Reaplica permissões quando o menu for injetado
    try {
      const alvo = document.getElementById('menuLateral');
      if (alvo) {
        const obs = new MutationObserver((muts, o) => {
          if (alvo.firstElementChild) {
            aplicarPermissoesNaTela();
            o.disconnect();
          }
        });
        obs.observe(alvo, { childList: true });
      }
    } catch {}
  </script>
</body>
</html>
