/* ==========================================================================
   RELATÓRIO POR EVENTO — Tema refinado KGB (drop-in)
   Mantém os mesmos seletores do HTML atual
   ========================================================================== */

/* ---------- Tokens de design ---------- */
:root{
  /* Cores base */
  --bg-page: #f7efe6;
  --bg-card: #ffffff;
  --bg-soft: #fbf7f1;

  --ink-1: #34291f;   /* títulos */
  --ink-2: #5f4f3f;   /* subtítulos/labels */
  --ink-3: #7a6a58;   /* texto auxiliar */

  --line:  #eadacc;   /* bordas */
  --line-2:#f1e6d9;   /* divisores internos */

  --brand: #c29a5d;   /* dourado */
  --ok:    #1a9f68;
  --warn:  #c48a1f;
  --bad:   #b91c1c;

  --radius-12: 12px;
  --radius-14: 14px;
  --radius-16: 16px;
  --shadow-1: 0 6px 18px rgba(0,0,0,.06);
  --shadow-2: 0 10px 28px rgba(0,0,0,.08);

  /* Tipografia */
  --title: "Playfair Display", ui-serif, Georgia, serif;
  --ui:    Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;

  /* Escalas */
  --kpi-scale: .86;
}

/* ========== Tema escuro (alinhado ao HTML com data-theme="dark") ========== */
html[data-theme="dark"]{
  --bg-page:#12100e; 
  --bg-card:#1f1b17; 
  --bg-soft:#191613;

  --ink-1:#f1e9df; 
  --ink-2:#d8cabb; 
  --ink-3:#b8a897;

  --line:#3b3128; 
  --line-2:#2c241e;

  --brand:#d2b37a; 
  --ok:#34d399; 
  --warn:#f59e0b; 
  --bad:#ef4444;

  --shadow-1:0 6px 18px rgba(0,0,0,.35);
  --shadow-2:0 10px 28px rgba(0,0,0,.45);
}

/* ---------- Base ---------- */
html,body{background:var(--bg-page)}
main.conteudo-principal, input, select, button{font-family:var(--ui)}
.conteudo-central{padding-bottom:28px}

.topo{display:flex;align-items:center;justify-content:space-between;gap:16px}
.topo h1{
  margin:0;color:var(--ink-1);letter-spacing:-.01em;font-family:var(--title);
  font-size:clamp(22px,2.2vw,30px); display:flex; gap:10px; align-items:center;
}

/* filtro topo */
.filtros-topo{display:flex;align-items:flex-end;gap:12px}
.sel-evento span{display:block;font-size:.86rem;color:var(--ink-2);margin-bottom:6px}
.sel-evento select{
  min-width:280px;background:#fff;border:1px solid var(--line);border-radius:12px;
  padding:9px 12px;font-size:.95rem;color:var(--ink-1);outline:none;
  transition:border-color .15s ease, box-shadow .15s ease;
}
.sel-evento select:focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(194,154,93,.18)}

/* Tema escuro para campos */
html[data-theme="dark"] .sel-evento select,
html[data-theme="dark"] .filtros-lista select,
html[data-theme="dark"] .filtros-lista input{
  background:#1f1b17; color:var(--ink-1); border-color:var(--line);
}

/* ---------- Card ---------- */
.card{
  background:var(--bg-card);border:1px solid var(--line);border-radius:var(--radius-16);
  box-shadow:var(--shadow-1);padding:16px;position:relative;
}
.card h3{
  margin:0 0 12px;color:var(--ink-1);font-size:1.06rem;letter-spacing:.1px;
}

/* ---------- KPIs ---------- */
.kpi-grid{
  display:grid; gap:14px; margin-top:14px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}
.kpi{
  display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:var(--radius-14);
  background:linear-gradient(180deg,#fff 0%, var(--bg-soft) 100%);
  border:1px solid var(--line);box-shadow:var(--shadow-1);
  transition:transform .15s ease, box-shadow .15s ease;
}
.kpi:hover{ transform:translateY(-2px); box-shadow:var(--shadow-2) }

.kpi-icon{
  width:40px;height:40px;flex:0 0 40px;border-radius:10px;display:grid;place-items:center;
  background:#f8efe4;border:1px solid var(--line);
}
.kpi-icon svg{ width:20px;height:20px;color:#6b5c49 }

html[data-theme="dark"] .kpi-icon{ background:#2a231d; }
html[data-theme="dark"] .kpi-icon svg{ color:#e7dcca; }

.kpi-meta{display:flex;flex-direction:column;gap:4px;min-width:0}
.kpi-title{font-size:.86rem;color:var(--ink-2);line-height:1}
.kpi-value{display:flex;align-items:baseline;gap:6px;line-height:1}
.kpi-value em{font-style:normal;color:var(--ink-3);font-size:.95rem}
.kpi-value b{
  font-weight:800;letter-spacing:-.02em;white-space:nowrap;font-variant-numeric:tabular-nums;
  line-height:.95;font-size:clamp(1.05rem, 1.1rem + .4vw, calc(1.7rem * var(--kpi-scale)));
}
.kpi--saldo{ background:linear-gradient(180deg,#fffaf2 0%, #fff3df 100%) }
html[data-theme="dark"] .kpi--saldo{ background:linear-gradient(180deg,#261f18 0%, #2c241e 100%) }

/* ---------- Mini “totais” (quando usados) ---------- */
.t-row{
  display:grid;grid-template-columns:1fr auto;align-items:center;
  padding:10px 12px;border:1px dashed var(--line);border-radius:12px;background:#fff;
  font-size:.97rem
}
.t-row .valor{font-variant-numeric:tabular-nums}

/* ---------- Tabelas compactas ---------- */
.tabela-min{
  width:100%;border-collapse:separate;border-spacing:0;background:#fff;
  border:1px solid var(--line);border-radius:12px;overflow:hidden
}
.tabela-min thead th{
  background:#faf6ef;color:#5a4936;font-weight:700;text-align:left;
  padding:10px 12px;border-bottom:1px solid var(--line);font-size:.92rem
}
.tabela-min tbody td{
  padding:10px 12px;border-bottom:1px solid var(--line-2);
  color:#3b3126;font-size:.95rem; vertical-align:top;
}
.tabela-min tbody tr:last-child td{border-bottom:none}
.tabela-min .num{ text-align:right; font-variant-numeric:tabular-nums }
.tabela-min tfoot td, .tabela-min tfoot th{
  padding:10px 12px;font-weight:800;color:#2f261b;background:#fffaf2;border-top:1px solid var(--line)
}
html[data-theme="dark"] .tabela-min thead th{ background:#2a241e; color:#e7dcca }
html[data-theme="dark"] .tabela-min, 
html[data-theme="dark"] .tabela-min tfoot th,
html[data-theme="dark"] .tabela-min tfoot td{ background:#1f1b17; color:#f1e9df }

/* ---------- Seções duplas ---------- */
.cards-duplos{
  display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:14px
}
@media (max-width: 1080px){
  .cards-duplos{ grid-template-columns:1fr }
}

/* ---------- Lista de lançamentos ---------- */
#listaLanc{ margin-top:10px }
.l-row{
  display:grid;align-items:center;gap:10px;margin-bottom:10px;padding:12px;
  grid-template-columns:110px 90px 1fr 220px 150px auto;
  border:1px solid var(--line);background:#fff;border-radius:var(--radius-16);
  box-shadow:var(--shadow-1);font-size:.96rem;transition:box-shadow .15s ease, transform .15s ease;
}
.l-row:hover{ box-shadow:var(--shadow-2); transform:translateY(-1px) }
.l-row .dt{ color:#5a4936; font-weight:700 }
.l-row .tipo{ font-weight:800; color:#4b3e31 }
.l-row .desc{ color:#3b3126; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.l-row .cat{ color:#6b5c49 }
.l-row .valor{ text-align:right; font-weight:800; font-variant-numeric:tabular-nums }

/* Badges de status (mantemos .badge e adicionamos .status para o Extrato) */
.badge{
  display:inline-flex;align-items:center;justify-content:center;gap:6px;
  padding:4px 10px;border-radius:999px;font-size:.78rem;border:1px solid transparent;
  white-space:nowrap; font-weight:700;
}
.badge.pago, .badge.recebido{ background:#e7f7ed; border-color:#cfeedd; color:#0f704a }
.badge.pendente{ background:#fff5e2; border-color:#ffe7bc; color:#9b6a17 }

/* === classes usadas pelo JS no Extrato === */
.status{
  display:inline-flex; align-items:center; gap:6px;
  padding:3px 9px; border-radius:999px; font-size:.78rem; font-weight:700;
  border:1px solid transparent; white-space:nowrap;
}
.status.baixado{ background:#e7f7ed; border-color:#cfeedd; color:#0f704a; }
.status.pendente{ background:#fff5e2; border-color:#ffe7bc; color:#9b6a17; }

/* ---------- Filtros da lista ---------- */
.row-between{display:flex;align-items:center;justify-content:space-between;gap:12px}
.filtros-lista{display:flex;flex-wrap:wrap;gap:10px;align-items:end}
.filtros-lista label span{display:block;font-size:.82rem;color:var(--ink-2);margin-bottom:6px}
.filtros-lista select, .filtros-lista input{
  background:#fff;border:1px solid var(--line);border-radius:12px;padding:8px 10px;min-height:38px;
  font-size:.95rem;color:var(--ink-1);outline:none;transition:border-color .15s ease, box-shadow .15s ease;
}
.filtros-lista .grow{flex:1}
.filtros-lista input::placeholder{color:#9a8b79}
.filtros-lista :is(select,input):focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(194,154,93,.18)}

/* ---------- Chips auxiliares ---------- */
.chip{
  display:inline-flex;align-items:center;gap:6px;padding:3px 9px;border-radius:999px;
  border:1px solid var(--line);font-size:.78rem;font-weight:700;color:#5a4a3b;background:#fff
}
.chip.verde{ background:#eefcf5;border-color:#cfeedd;color:#0f704a }
.chip.vinho{ background:#fff0f0;border-color:#ffdede;color:#a02323 }

/* ---------- Cartão de gráfico ---------- */
.mini-chart-wrap{ position:relative; height:180px }
#miniFluxo{ position:absolute; inset:2px 6px 6px 6px }
#chartEmpty{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  color:var(--ink-3); font-size:.88rem; background:repeating-linear-gradient(45deg,#faf6ef 0 8px,#fff 8px 16px);
  border-radius:var(--radius-12); border:1px dashed var(--line);
}

/* ---------- Barras proporcionais (Contratado × Recebido) ---------- */
.bars .bar{
  position:relative;
  overflow:hidden;
  border-radius:8px;
}
.bars .bar::before{
  content:"";
  position:absolute; inset:0;
  width:var(--w, 0%);
  background:linear-gradient(90deg,#fff8e9 0%, #ffe9bf 100%); /* default/fallback */
  border-right:1px solid rgba(0,0,0,.06);
}
/* Cores por barra */
#bar-contr::before{ background:linear-gradient(90deg,#eaf3ff 0%, #cfe2ff 100%) }
#bar-recv::before { background:linear-gradient(90deg,#e7f7ed 0%, #cfeedd 100%) }
#bar-pend::before { background:linear-gradient(90deg,#fff0f0 0%, #ffdede 100%) }
/* texto por cima */
.bars .bar > *{ position:relative; z-index:1 }

/* ---------- Estados e acessibilidade ---------- */
a.link-voltar{ color:var(--ink-2); text-decoration:none; border-bottom:1px dashed currentColor }
a.link-voltar:hover{ color:var(--ink-1) }
:focus-visible{ outline:2px solid rgba(194,154,93,.5); outline-offset:2px; border-radius:8px }

/* ---------- Responsividade fina ---------- */
@media (max-width: 1100px){
  .l-row{ grid-template-columns: 90px 80px 1fr 170px 130px auto }
}
@media (max-width: 780px){
  .l-row{
    grid-template-columns: 90px 1fr auto;
    grid-template-areas:
      "dt desc badge"
      "tipo cat valor";
    row-gap:6px;
  }
  .l-row .dt{ grid-area: dt }
  .l-row .desc{ grid-area: desc }
  .l-row .tipo{ grid-area: tipo }
  .l-row .cat{ grid-area: cat }
  .l-row .valor{ grid-area: valor; text-align:right }
}
@media (max-width: 640px){
  .sel-evento select{ min-width:220px }
  .kpi-value b{
    font-size:clamp(1rem, 1rem + .3vw, calc(1.45rem * var(--kpi-scale)));
  }
}

/* ---------- Motion preferences ---------- */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important }
}

/* ---------- Pequenos utilitários ---------- */
.muted{ color:var(--ink-3) }
.num  { text-align:right }
.row  { display:flex; gap:10px; align-items:center; flex-wrap:wrap }
/* === Polish Pack: tipografia, overflow e responsividade fina === */

/* KPIs: impedir overflow do valor e manter layout firme */
.kpi { min-width: 0; align-items: flex-start; }
.kpi-meta { min-width: 0; }
.kpi-value { 
  display: flex; 
  align-items: baseline; 
  gap: 6px; 
  line-height: 1; 
  min-width: 0; 
  overflow: hidden;           /* evita “vazar” do card */
}
.kpi-value em { flex: 0 0 auto; }
.kpi-value b{
  display: block;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;    /* trunca elegantemente se ficar grande */
  white-space: nowrap;        /* mantém em uma linha */
  font-variant-numeric: tabular-nums;
  font-size: clamp(1.05rem, 1.1rem + .4vw, 1.7rem);
}

/* Grid de KPIs um pouquinho mais generosa em telas médias */
.kpi-grid{
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}

/* Tabelas: números sempre íntegros e alinhados sem quebrar */
.tabela-min .num{
  white-space: nowrap; 
  font-variant-numeric: tabular-nums; 
  overflow: hidden; 
  text-overflow: ellipsis;
}

/* Barras (Contratado × Recebido): altura/espacamento melhores */
.bars { gap: 12px; }
.bars .bar{
  padding: 12px 14px; 
  border-radius: 12px; 
  display: flex; 
  align-items: center; 
  justify-content: space-between;
}
.bars .bar strong{ font-weight: 800; }
.bars .bar [data-v]{ font-variant-numeric: tabular-nums; white-space: nowrap; }

/* Mobile tweaks para títulos e filtros respirarem melhor */
@media (max-width: 720px){
  .topo h1{ font-size: clamp(20px, 4.8vw, 26px); }
  .filtros-topo{ gap: 10px; }
}
/* ====== KPI – layout firme e sem overflow ====== */
.kpi { min-width:0; align-items:flex-start; }
.kpi-icon { flex:0 0 40px; }
.kpi-meta { flex:1; min-width:0; }                /* <-- libera espaço pro valor */
.kpi-title{
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.kpi-value{
  display:flex; align-items:baseline; gap:6px; line-height:1;
  min-width:0; overflow:hidden;
}
.kpi-value em{ flex:0 0 auto; }
.kpi-value b{
  display:block; max-width:100%;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  font-variant-numeric: tabular-nums;
  /* valor um pouco menor pra caber mais vezes */
  font-size: clamp(1.0rem, 0.9rem + 0.9vw, 1.45rem);
}

/* Cards de KPI mais largos (reduz colunas, melhora leitura) */
.kpi-grid{
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

/* Números das tabelas nunca quebram feio */
.tabela-min .num{
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  font-variant-numeric: tabular-nums;
}

/* Barras do "Contratado × Recebido" com mais respiro */
.bars{ gap:12px; }
.bars .bar{
  padding:12px 14px; border-radius:12px; display:flex;
  align-items:center; justify-content:space-between;
}
.bars .bar [data-v]{ white-space:nowrap; font-variant-numeric:tabular-nums; }

/* Mobile – dá um respiro no título e filtros */
@media (max-width: 720px){
  .topo h1{ font-size: clamp(20px, 4.8vw, 26px); }
  .filtros-topo{ gap:10px; }
}
/* === UPGRADE DE VISUAL E TIPOGRAFIA DOS KPIs === */
.kpi { 
  min-width:0; align-items:flex-start; gap:14px; 
  padding:16px 18px; border-radius:14px;
  background:linear-gradient(180deg,#fff 0%, var(--bg-soft) 100%);
  box-shadow:0 8px 22px rgba(0,0,0,.06);
  transition:transform .18s ease, box-shadow .18s ease;
}
.kpi:hover{ transform:translateY(-2px); box-shadow:0 16px 32px rgba(0,0,0,.08); }
.kpi-icon{ width:44px;height:44px;border-radius:12px; flex:0 0 44px; }
.kpi-meta{ flex:1; min-width:0; }

.kpi-title{
  font-size:.80rem; letter-spacing:.2px; color:var(--ink-2);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.kpi-value{
  display:flex; align-items:baseline; gap:6px; line-height:1;
  min-width:0; overflow:hidden;
}
.kpi-value em{ flex:0 0 auto; font-size:1rem; color:var(--ink-3); }
.kpi-value b{
  display:block; max-width:100%;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  font-variant-numeric:tabular-nums;
  font-weight:800; letter-spacing:-.02em;
  /* menor em telas pequenas, cresce em telas largas */
  font-size:clamp(1.05rem, 1rem + 1.0vw, 1.65rem);
}

/* Cards ficam mais largos por padrão (melhor para valores longos) */
.kpi-grid{ grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); }

/* Barras “Contratado × Recebido” com acabamento premium */
.bars .bar{
  padding:14px 16px; border-radius:12px; display:flex; align-items:center; justify-content:space-between;
  background:var(--bg-card); border:1px solid var(--line); box-shadow:0 4px 12px rgba(0,0,0,.04);
}
.bars .bar::before{ border-right:0; opacity:.85; }
/* --- Fix: Contratado × Recebido sem corte --- */
#view-contratado .card{
  overflow: visible;           /* nada é “aparado” pelo card */
  margin-bottom: 14px;         /* respiro antes do próximo bloco */
}

.bars{
  display: grid;
  gap: 12px;
  max-width: 640px;            /* um pouco mais largo, opcional */
}

.bars .bar{
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-radius: 12px;
  min-height: 44px;            /* garante altura da barra */
  overflow: hidden;            /* mantém o preenchimento interno organizado */
}

.bars .bar > *{
  position: relative; z-index: 1;
  white-space: nowrap;         /* valores não quebram feio */
}

.bars .bar::before{
  content: "";
  position: absolute; inset: 0;
  width: var(--w, 0%);
  background: linear-gradient(90deg,#fff8e9 0%, #ffe9bf 100%); /* fallback */
  border-right: 1px solid rgba(0,0,0,.06);
}

/* Cores das 3 barras (mantém seu padrão) */
#bar-contr::before{ background: linear-gradient(90deg,#eaf3ff 0%, #cfe2ff 100%) }
#bar-recv::before { background: linear-gradient(90deg,#e7f7ed 0%, #cfeedd 100%) }
#bar-pend::before { background: linear-gradient(90deg,#fff0f0 0%, #ffdede 100%) }

/* Micropolimentos gerais */
.card{ border-radius:16px; box-shadow:0 10px 24px rgba(0,0,0,.06); }
.tabela-min .num{ white-space:nowrap; text-overflow:ellipsis; overflow:hidden; }
/* ==== KPIs — ajuste forte de layout e tipografia ==== */
.kpi-grid{
  /* cartões mais largos pra caber os valores */
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)) !important;
  gap: 12px;
}

.kpi{
  padding: 14px 16px;
  border-radius: 14px;
  background: linear-gradient(180deg,#fff 0%, var(--bg-soft) 100%);
  box-shadow: 0 10px 22px rgba(0,0,0,.06);
}

.kpi-icon{ width: 42px; height: 42px; border-radius: 12px; }

.kpi-meta{ min-width:0; flex:1; }
.kpi-title{
  font-size: .80rem;
  color: var(--ink-2);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

.kpi-value{
  display:flex; align-items:baseline; gap:6px; line-height:1;
  min-width:0; width:100%; overflow:hidden;
}
.kpi-value em{ font-size: .85rem; color: var(--ink-3); flex:0 0 auto; }

/* valor MENOR por padrão + ainda responsivo */
.kpi-value b{
  display:block; max-width:100%;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  font-variant-numeric: tabular-nums;
  font-weight: 800;
  letter-spacing: -.02em;
  font-size: clamp(.95rem, .85rem + .35vw, 1.20rem);
}
.tabela-min{ width:100%; border-collapse:collapse; }
.tabela-min th, .tabela-min td{ padding:6px 8px; border-bottom:1px solid #eee; }
.tabela-min .num{ text-align:right; font-variant-numeric:tabular-nums; }
.tabela-min th{ color:#7b6a5e; font-weight:700; font-size:12px; text-transform:uppercase; letter-spacing:.3px; }
.tabela-min td.num{ white-space:nowrap; }
.btn.btn-gold{
    background:#c8a35f; color:#fff; border:none; padding:8px 12px;
    border-radius:10px; font-weight:700; cursor:pointer;
    box-shadow:0 1px 0 rgba(0,0,0,.07), inset 0 0 0 1px rgba(255,255,255,.2);
  }
  .btn.btn-gold:hover{ filter:brightness(.95); }
  /* ========= PRINT STYLES ========= */
@media print {
  /* fundo branco e sem sombras */
  html, body { background: #fff !important; }
  * { box-shadow: none !important; text-shadow: none !important; }

  /* esconder elementos de navegação/ação */
  #menuLateral,
  #hamburguer,
  .top-actions,
  .tabs,
  .filtros-topo { display: none !important; }

  /* expandir conteúdo */
  .conteudo-principal, .conteudo-central { padding: 0 !important; max-width: 100% !important; }

  /* bordas e linhas claras para economizar tinta */
  .card, .tabela-min, .tabela-min th, .tabela-min td {
    border-color: #ddd !important;
    background: #fff !important;
  }

  /* garantir números alinhados e legíveis */
  .num { font-variant-numeric: tabular-nums; }

  /* evitar quebra feia */
  .kpi-grid, .cards-duplos { break-inside: avoid; page-break-inside: avoid; }
  table { break-inside: auto; }
  tr, img { break-inside: avoid; page-break-inside: avoid; }

  /* cores dos status em tons neutros na impressão P&B */
  .status.baixado { background: #e8f3ec !important; color: #0a5c3c !important; }
  .status.pendente { background: #fff3d9 !important; color: #8a5d12 !important; }
}
